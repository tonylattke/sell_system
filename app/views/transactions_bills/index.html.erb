<% content_for :app_controller do %>
  ng-app='app.sellApp' ng-controller='TransactionsBillsCtrl'
<% end %>

<% content_for :seach_navbar do %>
  
<% end %>

<div class="row">
  
  <div class="col-md-12">
    <div class="row">
      
      <!-- Options -->
      <div class="col-md-4">
        <div class="row">
          
          <div class="col-md-12 panel_options ">
            <h3>Consult movements and bills</h3>
            <form role="form" name="consult_form">
              <div class="row">
                <div class="col-md-12 form-group" ng-class="{'has-error': consult_form.dateFrom.$invalid, 'has-success': consult_form.dateFrom.$valid}">
                  <h5>From:</h5>
                  <input type="date" class="form-control" ng-model="consult_from" required>
                </div>
                <div class="col-md-12 form-group" ng-class="{'has-error': consult_form.dateTo.$invalid, 'has-success': consult_form.dateTo.$valid}">
                  <h5>To:</h5>
                  <input type="date" class="form-control" ng-model="consult_to" required>
                </div>
              </div>
              <div class="text-center">
                <div class="btn btn-lg btn-primary col-md-12" ng-disabled="consult_form.$invalid" ng-click="Consult()">Done</div>
              </div>
            </form>
          </div>
          
          <div class="col-md-12 panel_options ">
            <h3>Create a cash transaction</h3>
            <form role="form" name="consult_form">
              <div class="row">
                
              </div>
              <div class="text-center">
                <div class="btn btn-lg btn-primary col-md-12" ng-disabled="transaction_form.$invalid" ng-click="CreateTransaction()">Done</div>
              </div>
            </form>
          </div>          
          
        </div>
      </div>

      <!-- Main content -->
      <div class="col-md-8 main_content">
          
          <h2>Bills</h2>

          <ul>
            <li ng-repeat="bill in bills" ng-click="ConsultBill(bill)">
              <div class="btn btn-lg btn-primary col-md-12 bill">
                {{bill.id}} - {{bill.created_at | date:'medium'}}
              </div>  
              <div ng-if="bill.extra_data" class="data_extra">
                <h4 ng-if="bill.extra_data.client_name">
                  <b>Client:</b> {{bill.extra_data.client_name}}
                </h4>
                <table class="table table-striped">
                  <thead>
                    <th>Photo</th>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Amount</th>
                  </thead>
                  <tbody>
                    <tr ng-repeat="combo in bill.extra_data.combos">
                      <td><img src="{{combo.photo}}" class="img-combo img-thumbnail"></td>
                      <td>{{combo.name}}</td>
                      <td>{{combo.price | number: 2}}</td>
                      <td>{{combo.amount}}</td>
                    </tr>
                    <tr ng-repeat="product in bill.extra_data.products">
                      <td><img src="{{product.photo}}" class="img-product img-thumbnail"></td>
                      <td>{{product.name}}</td>
                      <td>{{product.price | number: 2}}</td>
                      <td>{{product.amount}}</td>
                    </tr>
                  </tbody>
                </table>
                <div class="text-center"><b>Total:</b> {{bill.total | number: 2}} </div>
              </div>
            </li>
          </ul>

          <h2>Transactions</h2>
      
        
      </div>

    </div>
  </div>

</div>
